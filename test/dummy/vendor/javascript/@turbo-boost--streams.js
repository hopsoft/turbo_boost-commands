var oe=Object.defineProperty,se=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable;var W=(a,o,u)=>o in a?oe(a,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[o]=u,S=(a,o)=>{for(var u in o||(o={}))fe.call(o,u)&&W(a,u,o[u]);if(U)for(var u of U(o))de.call(o,u)&&W(a,u,o[u]);return a},O=(a,o)=>se(a,ue(o));var _="0.1.10";var ce={turboPermanentAttribute:"data-turbo-permanent"},H=S({},ce);var $=function(){"use strict";let a=new Set,o={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:A,afterNodeAdded:A,beforeNodeMorphed:A,afterNodeMorphed:A,beforeNodeRemoved:A,afterNodeRemoved:A,beforeAttributeUpdated:A},head:{style:"merge",shouldPreserve:function(e){return e.getAttribute("im-preserve")==="true"},shouldReAppend:function(e){return e.getAttribute("im-re-append")==="true"},shouldRemove:A,afterHeadMorphed:A}};function u(e,t,n={}){e instanceof Document&&(e=e.documentElement),typeof t=="string"&&(t=Z(t));let r=x(t),i=G(e,r,n);return c(e,r,i)}function c(e,t,n){if(n.head.block){let r=e.querySelector("head"),i=t.querySelector("head");if(r&&i){let l=T(i,r,n);Promise.all(l).then(function(){c(e,t,Object.assign(n,{head:{block:!1,ignore:!0}}))});return}}if(n.morphStyle==="innerHTML")return b(t,e,n),e.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let r=te(t,e,n),i=r==null?void 0:r.previousSibling,l=r==null?void 0:r.nextSibling,s=f(e,r,n);return r?ee(i,s,l):[]}else throw"Do not understand how to morph style "+n.morphStyle}function d(e,t){return t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function f(e,t,n){if(!(n.ignoreActive&&e===document.activeElement))return t==null?n.callbacks.beforeNodeRemoved(e)===!1?e:(e.remove(),n.callbacks.afterNodeRemoved(e),null):V(e,t)?(n.callbacks.beforeNodeMorphed(e,t)===!1||(e instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&n.head.style!=="morph"?T(t,e,n):(g(t,e,n),d(e,n)||b(t,e,n))),n.callbacks.afterNodeMorphed(e,t)),e):n.callbacks.beforeNodeRemoved(e)===!1||n.callbacks.beforeNodeAdded(t)===!1?e:(e.parentElement.replaceChild(t,e),n.callbacks.afterNodeAdded(t),n.callbacks.afterNodeRemoved(e),t)}function b(e,t,n){let r=e.firstChild,i=t.firstChild,l;for(;r;){if(l=r,r=l.nextSibling,i==null){if(n.callbacks.beforeNodeAdded(l)===!1)return;t.appendChild(l),n.callbacks.afterNodeAdded(l),y(n,l);continue}if(j(l,i,n)){f(i,l,n),i=i.nextSibling,y(n,l);continue}let s=K(e,t,l,i,n);if(s){i=D(i,s,n),f(s,l,n),y(n,l);continue}let p=Q(e,t,l,i,n);if(p){i=D(i,p,n),f(p,l,n),y(n,l);continue}if(n.callbacks.beforeNodeAdded(l)===!1)return;t.insertBefore(l,i),n.callbacks.afterNodeAdded(l),y(n,l)}for(;i!==null;){let s=i;i=i.nextSibling,F(s,n)}}function h(e,t,n,r){return e==="value"&&r.ignoreActiveValue&&t===document.activeElement?!0:r.callbacks.beforeAttributeUpdated(e,t,n)===!1}function g(e,t,n){let r=e.nodeType;if(r===1){let i=e.attributes,l=t.attributes;for(let s of i)h(s.name,t,"update",n)||t.getAttribute(s.name)!==s.value&&t.setAttribute(s.name,s.value);for(let s=l.length-1;0<=s;s--){let p=l[s];h(p.name,t,"remove",n)||e.hasAttribute(p.name)||t.removeAttribute(p.name)}}(r===8||r===3)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),d(t,n)||R(e,t,n)}function v(e,t,n,r){if(e[n]!==t[n]){let i=h(n,t,"update",r);i||(t[n]=e[n]),e[n]?i||t.setAttribute(n,e[n]):h(n,t,"remove",r)||t.removeAttribute(n)}}function R(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&e.type!=="file"){let r=e.value,i=t.value;v(e,t,"checked",n),v(e,t,"disabled",n),e.hasAttribute("value")?r!==i&&(h("value",t,"update",n)||(t.setAttribute("value",r),t.value=r)):h("value",t,"remove",n)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement)v(e,t,"selected",n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let r=e.value,i=t.value;if(h("value",t,"update",n))return;r!==i&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r&&(t.firstChild.nodeValue=r)}}function T(e,t,n){let r=[],i=[],l=[],s=[],p=n.head.style,k=new Map;for(let m of e.children)k.set(m.outerHTML,m);for(let m of t.children){let E=k.has(m.outerHTML),w=n.head.shouldReAppend(m),C=n.head.shouldPreserve(m);E||C?w?i.push(m):(k.delete(m.outerHTML),l.push(m)):p==="append"?w&&(i.push(m),s.push(m)):n.head.shouldRemove(m)!==!1&&i.push(m)}s.push(...k.values());let N=[];for(let m of s){let E=document.createRange().createContextualFragment(m.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(E)!==!1){if(E.href||E.src){let w=null,C=new Promise(function(ae){w=ae});E.addEventListener("load",function(){w()}),N.push(C)}t.appendChild(E),n.callbacks.afterNodeAdded(E),r.push(E)}}for(let m of i)n.callbacks.beforeNodeRemoved(m)!==!1&&(t.removeChild(m),n.callbacks.afterNodeRemoved(m));return n.head.afterHeadMorphed(t,{added:r,kept:l,removed:i}),N}function ye(){}function A(){}function Y(e){let t={};return Object.assign(t,o),Object.assign(t,e),t.callbacks={},Object.assign(t.callbacks,o.callbacks),Object.assign(t.callbacks,e.callbacks),t.head={},Object.assign(t.head,o.head),Object.assign(t.head,e.head),t}function G(e,t,n){return n=Y(n),{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:le(e,t),deadIds:new Set,callbacks:n.callbacks,head:n.head}}function j(e,t,n){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName?e.id!==""&&e.id===t.id?!0:I(n,e,t)>0:!1}function V(e,t){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName}function D(e,t,n){for(;e!==t;){let r=e;e=e.nextSibling,F(r,n)}return y(n,t),t.nextSibling}function K(e,t,n,r,i){let l=I(i,n,t),s=null;if(l>0){let p=r,k=0;for(;p!=null;){if(j(n,p,i))return p;if(k+=I(i,p,e),k>l)return null;p=p.nextSibling}}return s}function Q(e,t,n,r,i){let l=r,s=n.nextSibling,p=0;for(;l!=null;){if(I(i,l,e)>0)return null;if(V(n,l))return l;if(V(s,l)&&(p++,s=s.nextSibling,p>=2))return null;l=l.nextSibling}return l}function Z(e){let t=new DOMParser,n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){let r=t.parseFromString(e,"text/html");if(n.match(/<\/html>/))return r.generatedByIdiomorph=!0,r;{let i=r.firstChild;return i?(i.generatedByIdiomorph=!0,i):null}}else{let i=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return i.generatedByIdiomorph=!0,i}}function x(e){if(e==null)return document.createElement("div");if(e.generatedByIdiomorph)return e;if(e instanceof Node){let t=document.createElement("div");return t.append(e),t}else{let t=document.createElement("div");for(let n of[...e])t.append(n);return t}}function ee(e,t,n){let r=[],i=[];for(;e!=null;)r.push(e),e=e.previousSibling;for(;r.length>0;){let l=r.pop();i.push(l),t.parentElement.insertBefore(l,t)}for(i.push(t);n!=null;)r.push(n),i.push(n),n=n.nextSibling;for(;r.length>0;)t.parentElement.insertBefore(r.pop(),t.nextSibling);return i}function te(e,t,n){let r;r=e.firstChild;let i=r,l=0;for(;r;){let s=ne(r,t,n);s>l&&(i=r,l=s),r=r.nextSibling}return i}function ne(e,t,n){return V(e,t)?.5+I(n,e,t):0}function F(e,t){y(t,e),t.callbacks.beforeNodeRemoved(e)!==!1&&(e.remove(),t.callbacks.afterNodeRemoved(e))}function re(e,t){return!e.deadIds.has(t)}function ie(e,t,n){return(e.idMap.get(n)||a).has(t)}function y(e,t){let n=e.idMap.get(t)||a;for(let r of n)e.deadIds.add(r)}function I(e,t,n){let r=e.idMap.get(t)||a,i=0;for(let l of r)re(e,l)&&ie(e,l,n)&&++i;return i}function q(e,t){let n=e.parentElement,r=e.querySelectorAll("[id]");for(let i of r){let l=i;for(;l!==n&&l!=null;){let s=t.get(l);s==null&&(s=new Set,t.set(l,s)),s.add(i.id),l=l.parentElement}}}function le(e,t){let n=new Map;return q(e,n),q(t,n),n}return{morph:u,defaults:o}}();var he=/TRIX-EDITOR/i,z={callbacks:{beforeNodeMorphed:(a,o)=>be(a)},morphStyle:"outerHTML",ignoreActiveValue:!0,head:{style:"merge"}};function J(a){return a.nodeType===Node.ELEMENT_NODE}function me(a){return J(a)?a.hasAttribute(H.turboPermanentAttribute)&&a.getAttribute(H.turboPermanentAttribute)!=="false":!1}function pe(a){return J(a)?a===document.activeElement:!1}function be(a){return!(me(a)||pe(a)&&a.tagName.match(he))}function ve(a,o,u={}){let c=S(S({},z.callbacks),u.callbacks);u=O(S(S({},z),u),{callbacks:c}),$.morph(a,o,u)}var L=ve;var M={before:"turbo-boost:stream:before-invoke",after:"turbo-boost:stream:after-invoke",finish:"turbo-boost:stream:finish-invoke"};function B(a,o,u){let{object:c,target:d}=a;o=o||{},o=O(S({},o),{object:a.object});let f={detail:o,bubbles:!0};d.dispatchEvent(new CustomEvent(M.before,f));let{delay:b}=o.invoke||{};b=b||0;let h=()=>{let g=u(c);f.detail.result=g,d.dispatchEvent(new CustomEvent(M.after,f));let v;g instanceof Animation&&(v=g.finished),g instanceof Promise&&(v=g),v?v.then(()=>{f.detail.promise="fulfilled",d.dispatchEvent(new CustomEvent(M.finish,f))},()=>{f.detail.promise="rejected",d.dispatchEvent(new CustomEvent(M.finish,f))}):d.dispatchEvent(new CustomEvent(M.finish,f))};b>0?setTimeout(h,b):h()}function ge(a,o,u){let c=o[0],d=o[1],f={method:a,eventName:c,eventOptions:d};u.forEach(b=>B(b,f,h=>h.dispatchEvent(new CustomEvent(c,d))))}function Ee(a,o,u){let c=o[0],d={method:a,html:c};u.forEach(f=>B(f,d,b=>L(b,c)))}function Ae(a,o,u){let c=a.slice(0,-1).trim(),d=o[0],f={method:a,property:c,value:d};u.forEach(b=>B(b,f,h=>h[c]=d))}function Se(a,o,u){let c={method:a,args:o};u.forEach(d=>B(d,c,f=>f[a].apply(f,o)))}function X(a,o,u){return a.match(/^dispatch(Event)?$/)?ge(a,o,u):a.match(/^morph|mutate$/)?Ee(a,o,u):a.endsWith("=")?Ae(a,o,u):Se(a,o,u)}function P(){let a=JSON.parse(this.templateContent.textContent),{id:o,selector:u,receiver:c,method:d,args:f,delay:b}=a,h=[{object:self,target:self}];u&&(h=Array.from(document.querySelectorAll(u)).map(g=>({object:g,target:g}))),c&&(h=h.map(g=>{let{object:v,target:R}=g,T=c.split(".");for(;T.length>0;)v=v[T.shift()],v.dispatchEvent&&(R=v);return{object:v,target:R}})),b>0?setTimeout(()=>X(d,f,h),b):X(d,f,h)}if(!self.Turbo)throw new Error("`Turbo` is not defined! Be sure to import `@turbo-boost/streams` after `@hotwired/turbo` or `@hotwired/turbo-rails`.");if(!Turbo.StreamActions)throw new Error("`Turbo.StreamActions` is not defined! Verify that you are running >= `7.2.0` of `@hotwired/turbo`.");Turbo.StreamActions.invoke=P;self.TurboBoost=self.TurboBoost||{};self.TurboBoost.Streams={invoke:P,invokeEvents:M,morph:L,schema:H,VERSION:_};console.info("@turbo-boost/streams has initialized and registered new stream actions with Turbo.");var qe=self.TurboBoost.Streams;export{qe as default};

