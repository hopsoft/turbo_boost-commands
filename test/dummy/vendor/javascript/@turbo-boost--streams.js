var e=Object.defineProperty,t=Object.defineProperties;var n=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;var $=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,y=(e,t)=>{for(var n in t||(t={}))o.call(t,n)&&$(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&$(e,n,t[n]);return e},O=(e,r)=>t(e,n(r));var a="0.1.11";var i={turboPermanentAttribute:"data-turbo-permanent"},s=y({},i);var m=function(){let e=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:A,afterNodeAdded:A,beforeNodeMorphed:A,afterNodeMorphed:A,beforeNodeRemoved:A,afterNodeRemoved:A,beforeAttributeUpdated:A},head:{style:"merge",shouldPreserve:function(e){return e.getAttribute("im-preserve")==="true"},shouldReAppend:function(e){return e.getAttribute("im-re-append")==="true"},shouldRemove:A,afterHeadMorphed:A}};function u(e,t,n={}){e instanceof Document&&(e=e.documentElement),typeof t=="string"&&(t=ee(t));let r=te(t),o=Q(e,r,n);return c(e,r,o)}function c(e,t,n){if(n.head.block){let r=e.querySelector("head"),o=t.querySelector("head");if(r&&o){let l=I(o,r,n);Promise.all(l).then((function(){c(e,t,Object.assign(n,{head:{block:!1,ignore:!0}}))}));return}}if(n.morphStyle==="innerHTML")return b(t,e,n),e.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let r=ne(t,e,n),o=r==null?void 0:r.previousSibling,l=r==null?void 0:r.nextSibling,a=f(e,r,n);return r?re(o,a,l):[]}throw"Do not understand how to morph style "+n.morphStyle}function d(e,t){return t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function f(e,t,n){if(!(n.ignoreActive&&e===document.activeElement))return t==null?n.callbacks.beforeNodeRemoved(e)===!1?e:(e.remove(),n.callbacks.afterNodeRemoved(e),null):V(e,t)?(n.callbacks.beforeNodeMorphed(e,t)===!1||(e instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&n.head.style!=="morph"?I(t,e,n):(g(t,e,n),d(e,n)||b(t,e,n))),n.callbacks.afterNodeMorphed(e,t)),e):n.callbacks.beforeNodeRemoved(e)===!1||n.callbacks.beforeNodeAdded(t)===!1?e:(e.parentElement.replaceChild(t,e),n.callbacks.afterNodeAdded(t),n.callbacks.afterNodeRemoved(e),t)}function b(e,t,n){let r,o=e.firstChild,l=t.firstChild;for(;o;){if(r=o,o=r.nextSibling,l==null){if(n.callbacks.beforeNodeAdded(r)===!1)return;t.appendChild(r),n.callbacks.afterNodeAdded(r),S(n,r);continue}if(F(r,l,n)){f(l,r,n),l=l.nextSibling,S(n,r);continue}let a=Z(e,t,r,l,n);if(a){l=q(l,a,n),f(a,r,n),S(n,r);continue}let i=x(e,t,r,l,n);if(i)l=q(l,i,n),f(i,r,n),S(n,r);else{if(n.callbacks.beforeNodeAdded(r)===!1)return;t.insertBefore(r,l),n.callbacks.afterNodeAdded(r),S(n,r)}}for(;l!==null;){let e=l;l=l.nextSibling,_(e,n)}}function h(e,t,n,r){return!(e!=="value"||!r.ignoreActiveValue||t!==document.activeElement)||r.callbacks.beforeAttributeUpdated(e,t,n)===!1}function g(e,t,n){let r=e.nodeType;if(r===1){let r=e.attributes,o=t.attributes;for(let e of r)h(e.name,t,"update",n)||t.getAttribute(e.name)!==e.value&&t.setAttribute(e.name,e.value);for(let r=o.length-1;0<=r;r--){let l=o[r];h(l.name,t,"remove",n)||e.hasAttribute(l.name)||t.removeAttribute(l.name)}}(r===8||r===3)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),d(t,n)||T(e,t,n)}function v(e,t,n,r){if(e[n]!==t[n]){let o=h(n,t,"update",r);o||(t[n]=e[n]),e[n]?o||t.setAttribute(n,e[n]):h(n,t,"remove",r)||t.removeAttribute(n)}}function T(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&e.type!=="file"){let r=e.value,o=t.value;v(e,t,"checked",n),v(e,t,"disabled",n),e.hasAttribute("value")?r!==o&&(h("value",t,"update",n)||(t.setAttribute("value",r),t.value=r)):h("value",t,"remove",n)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement)v(e,t,"selected",n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let r=e.value,o=t.value;if(h("value",t,"update",n))return;r!==o&&(t.value=r),t.firstChild&&t.firstChild.nodeValue!==r&&(t.firstChild.nodeValue=r)}}function I(e,t,n){let r=[],o=[],l=[],a=[],i=n.head.style,s=new Map;for(let t of e.children)s.set(t.outerHTML,t);for(let e of t.children){let t=s.has(e.outerHTML),r=n.head.shouldReAppend(e),m=n.head.shouldPreserve(e);t||m?r?o.push(e):(s.delete(e.outerHTML),l.push(e)):i==="append"?r&&(o.push(e),a.push(e)):n.head.shouldRemove(e)!==!1&&o.push(e)}a.push(...s.values());let m=[];for(let e of a){let o=document.createRange().createContextualFragment(e.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(o)!==!1){if(o.href||o.src){let e=null,t=new Promise((function(t){e=t}));o.addEventListener("load",(function(){e()})),m.push(t)}t.appendChild(o),n.callbacks.afterNodeAdded(o),r.push(o)}}for(let e of o)n.callbacks.beforeNodeRemoved(e)!==!1&&(t.removeChild(e),n.callbacks.afterNodeRemoved(e));return n.head.afterHeadMorphed(t,{added:r,kept:l,removed:o}),m}function A(){}function K(e){let n={};return Object.assign(n,t),Object.assign(n,e),n.callbacks={},Object.assign(n.callbacks,t.callbacks),Object.assign(n.callbacks,e.callbacks),n.head={},Object.assign(n.head,t.head),Object.assign(n.head,e.head),n}function Q(e,t,n){return n=K(n),{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:oe(e,t),deadIds:new Set,callbacks:n.callbacks,head:n.head}}function F(e,t,n){return e!=null&&t!=null&&(e.nodeType===t.nodeType&&e.tagName===t.tagName&&(e.id!==""&&e.id===t.id||w(n,e,t)>0))}function V(e,t){return e!=null&&t!=null&&(e.nodeType===t.nodeType&&e.tagName===t.tagName)}function q(e,t,n){for(;e!==t;){let t=e;e=e.nextSibling,_(t,n)}return S(n,t),t.nextSibling}function Z(e,t,n,r,o){let l=w(o,n,t),a=null;if(l>0){let t=r,a=0;for(;t!=null;){if(F(n,t,o))return t;if(a+=w(o,t,e),a>l)return null;t=t.nextSibling}}return a}function x(e,t,n,r,o){let l=r,a=n.nextSibling,i=0;for(;l!=null;){if(w(o,l,e)>0)return null;if(V(n,l))return l;if(V(a,l)&&(i++,a=a.nextSibling,i>=2))return null;l=l.nextSibling}return l}function ee(e){let t=new DOMParser,n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){let r=t.parseFromString(e,"text/html");if(n.match(/<\/html>/))return r.generatedByIdiomorph=!0,r;{let e=r.firstChild;return e?(e.generatedByIdiomorph=!0,e):null}}{let n=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return n.generatedByIdiomorph=!0,n}}function te(e){if(e==null)return document.createElement("div");if(e.generatedByIdiomorph)return e;if(e instanceof Node){let t=document.createElement("div");return t.append(e),t}{let t=document.createElement("div");for(let n of[...e])t.append(n);return t}}function re(e,t,n){let r=[],o=[];for(;e!=null;)r.push(e),e=e.previousSibling;for(;r.length>0;){let e=r.pop();o.push(e),t.parentElement.insertBefore(e,t)}for(o.push(t);n!=null;)r.push(n),o.push(n),n=n.nextSibling;for(;r.length>0;)t.parentElement.insertBefore(r.pop(),t.nextSibling);return o}function ne(e,t,n){let r;r=e.firstChild;let o=r,l=0;for(;r;){let e=ie(r,t,n);e>l&&(o=r,l=e),r=r.nextSibling}return o}function ie(e,t,n){return V(e,t)?.5+w(n,e,t):0}function _(e,t){S(t,e),t.callbacks.beforeNodeRemoved(e)!==!1&&(e.remove(),t.callbacks.afterNodeRemoved(e))}function le(e,t){return!e.deadIds.has(t)}function ae(t,n,r){return(t.idMap.get(r)||e).has(n)}function S(t,n){let r=t.idMap.get(n)||e;for(let e of r)t.deadIds.add(e)}function w(t,n,r){let o=t.idMap.get(n)||e,l=0;for(let e of o)le(t,e)&&ae(t,e,r)&&++l;return l}function N(e,t){let n=e.parentElement,r=e.querySelectorAll("[id]");for(let e of r){let r=e;for(;r!==n&&r!=null;){let n=t.get(r);n==null&&(n=new Set,t.set(r,n)),n.add(e.id),r=r.parentElement}}}function oe(e,t){let n=new Map;return N(e,n),N(t,n),n}return{morph:u,defaults:t}}();var p,E=0,k=/TRIX-EDITOR/i;function Y(e){return e.nodeType===Node.ELEMENT_NODE}function be(e){return!!Y(e)&&(e.hasAttribute(s.turboPermanentAttribute)&&e.getAttribute(s.turboPermanentAttribute)!=="false")}function ve(e){return!!Y(e)&&e===document.activeElement}function ge(e){return!(be(e)||ve(e)&&e.tagName.match(k))}var M={callbacks:{beforeNodeMorphed:(e,t)=>ge(e)},morphStyle:"outerHTML",ignoreActiveValue:!0,head:{style:"merge"}};function Ee(e,t,n={}){let r=y(y({},M.callbacks),n.callbacks);return n=O(y(y({},M),n),{callbacks:r}),new Promise((r=>{setTimeout((()=>{m.morph(e,t,n),r()}),E)}))}p=Ee;var C={get delay(){return E},set delay(e){E=e},get method(){return p},set method(e){p=e}};var j={before:"turbo-boost:stream:before-invoke",after:"turbo-boost:stream:after-invoke",finish:"turbo-boost:stream:finish-invoke"};function B(e,t,n){let{object:r,target:o}=e;t=t||{},t=O(y({},t),{object:e.object});let l={detail:t,bubbles:!0};o.dispatchEvent(new CustomEvent(j.before,l));let{delay:a}=t.invoke||{};a=a||0;let h=()=>{let e=n(r);l.detail.result=e,o.dispatchEvent(new CustomEvent(j.after,l));let t;e instanceof Animation&&(t=e.finished),e instanceof Promise&&(t=e),t?t.then((()=>{l.detail.promise="fulfilled",o.dispatchEvent(new CustomEvent(j.finish,l))})).catch((e=>{l.detail.promise="rejected",l.detail.error=e,o.dispatchEvent(new CustomEvent(j.finish,l))})):o.dispatchEvent(new CustomEvent(j.finish,l))};a>0?setTimeout(h,a):h()}function Ae(e,t,n){let r=t[0],o=t[1],l={method:e,eventName:r,eventOptions:o};n.forEach((e=>B(e,l,(e=>e.dispatchEvent(new CustomEvent(r,o))))))}function ye(e,t,n){let r=t[0],o={method:e,html:r};n.forEach((e=>B(e,o,(e=>C.method(e,r)))))}function Se(e,t,n){let r=e.slice(0,-1).trim(),o=t[0],l={method:e,property:r,value:o};n.forEach((e=>B(e,l,(e=>e[r]=o))))}function ke(e,t,n){let r={method:e,args:t};n.forEach((n=>B(n,r,(n=>n[e].apply(n,t)))))}function G(e,t,n){return e.match(/^dispatch(Event)?$/)?Ae(e,t,n):e.match(/^morph|mutate$/)?ye(e,t,n):e.endsWith("=")?Se(e,t,n):ke(e,t,n)}function D(){let e=JSON.parse(this.templateContent.textContent),{id:t,selector:n,receiver:r,method:o,args:l,delay:a}=e,i=[{object:self,target:self}];n&&(i=Array.from(document.querySelectorAll(n)).map((e=>({object:e,target:e})))),r&&(i=i.map((e=>{let{object:t,target:n}=e,o=r.split(".");for(;o.length>0;)t=t[o.shift()],t.dispatchEvent&&(n=t);return{object:t,target:n}}))),a>0?setTimeout((()=>G(o,l,i)),a):G(o,l,i)}if(!self.Turbo)throw new Error("`Turbo` is not defined! Be sure to import `@turbo-boost/streams` after `@hotwired/turbo` or `@hotwired/turbo-rails`.");if(!Turbo.StreamActions)throw new Error("`Turbo.StreamActions` is not defined! Verify that you are running >= `7.2.0` of `@hotwired/turbo`.");Turbo.StreamActions.invoke=D;self.TurboBoost=self.TurboBoost||{};self.TurboBoost.Streams={invoke:D,invokeEvents:j,morph:C,schema:s,VERSION:a};console.info("@turbo-boost/streams has initialized and registered new stream actions with Turbo.");var H=self.TurboBoost.Streams;export{H as default};

