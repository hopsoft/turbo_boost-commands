var n={};function f(t,e){return e=e.toLowerCase(),n[t].includes(e)||!Object.values(n).flat().includes(e)&&n[t].includes("*")}function l(t){let e=t.dataset.turboReflexFrame;return e=e||t.closest("turbo-frame").id,e||console.error("The reflex element does not specify a frame!","Please set the 'data-turbo-reflex-frame' attribute.",t),e}function d(t){let e=document.getElementById(t);return e||console.error(`The frame '${t}' does not exist!`),e}function m(t){let e=document.createElement("a");return e.href=t,new URL(e)}function b(t){let e=Array.from(t.attributes).reduce((a,r)=>(r.name.includes("data-turbo-reflex")||(a[r.name]=r.value),a),{});return e.tagName=t.tagName,e.value=t.value,e}function u(t){let e=t.target.closest("[data-turbo-reflex]");if(!e||!f(t.type,t.target.tagName))return;t.preventDefault(),t.stopPropagation();let a=l(e);if(!a)return;let r=d(a);if(!r)return;let s=r.dataset.turboReflexFrameSrc;if(!s)return;let c={name:e.dataset.turboReflex,frame:a,element:b(e)},i=m(s);i.searchParams.set("turbo_reflex",JSON.stringify(c)),r.src=i.toString()}function o(t,e){n[t]=e,document.removeEventListener(t,u,!0),document.addEventListener(t,u,!0)}o("change",["input","select","textarea"]);o("submit",["form"]);o("click",["*"]);var g={registerEvent:o,registeredEvents:n};export{g as default};
//# sourceMappingURL=turbo_reflex.js.map
