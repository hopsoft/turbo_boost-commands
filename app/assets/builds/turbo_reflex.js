var o={},i={};addEventListener("turbo:frame-render",t=>{let e=t.target.id,{location:r}=t.detail.fetchResponse;e&&r&&(i[e]=r.href)});addEventListener("turbo:frame-load",t=>{let e=t.target,r=t.target.src||i[e.id];e.dataset.turboReflexFrameSrc=r,delete i[e.id]});function d(t,e){return e=e.toLowerCase(),o[t].includes(e)||!Object.values(o).flat().includes(e)&&o[t].includes("*")}function l(t){let e=t.dataset.turboReflexFrame||t.dataset.turboFrame;if(!e){let r=t.closest("turbo-frame");r&&(e=r.id)}return e||console.error("The reflex element does not specify a frame!","Please move the reflex element inside a <turbo-frame> or set either the 'data-turbo-reflex-frame' or 'data-turbo-frame' attribute.",t),e}function m(t){let e=document.getElementById(t);return e||console.error(`The frame '${t}' does not exist!`),e}function b(t){let e=t.dataset.turboReflexFrameSrc;return e||console.error(`The 'data-turbo-reflex-frame-src' attribute for the frame '${frameId}' is not set!`,"This attribute is set automatically for frames that load their content after being inserted into the DOM;","however, frames that eager load their content server side on initial page render must set this attribute explicitly.",t),e}function g(){return document.getElementById("turbo-reflex-token").getAttribute("content")}function h(t){let e=document.createElement("a");return e.href=t,new URL(e)}function x(t){let e=Array.from(t.attributes).reduce((r,n)=>(n.name.includes("data-turbo-reflex")||(r[n.name]=n.value),r),{});return e.tagName=t.tagName,e.value=t.value,e}function c(t){let e=t.target.closest("[data-turbo-reflex]");if(!e||!d(t.type,e.tagName))return;let r=l(e);if(!r)return;let n=m(r);if(!n)return;let u=b(n);if(!u)return;let f={token:g(),name:e.dataset.turboReflex,frame:r,element:x(e)};if(e.tagName.toLowerCase()==="form"){let a=document.createElement("input");a.type="hidden",a.name="turbo_reflex",a.value=JSON.stringify(f),e.appendChild(a)}else{t.preventDefault(),t.stopPropagation();let a=h(u);a.searchParams.set("turbo_reflex",JSON.stringify(f)),n.src=a.toString()}}function s(t,e){o[t]=e,document.removeEventListener(t,c,!0),document.addEventListener(t,c,!0)}s("change",["input","select","textarea"]);s("submit",["form"]);s("click",["*"]);var p={registerEvent:s,registeredEvents:o};export{p as default};
//# sourceMappingURL=turbo_reflex.js.map
