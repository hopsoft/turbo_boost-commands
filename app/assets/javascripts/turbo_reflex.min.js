var n={},i={};addEventListener("turbo:frame-render",e=>{let t=e.target.id,{location:r}=e.detail.fetchResponse;t&&r&&(i[t]=r.href)});addEventListener("turbo:frame-load",e=>{let t=e.target,r=e.target.src||i[t.id];t.dataset.turboReflexFrameSrc=r,delete i[t.id]});function d(e,t){return t=t.toLowerCase(),n[e].includes(t)||!Object.values(n).flat().includes(t)&&n[e].includes("*")}function l(e){let t=e.dataset.turboReflexFrame||e.dataset.turboFrame;if(!t){let r=e.closest("turbo-frame");r&&(t=r.id)}return t||console.error("The reflex element does not specify a frame!","Please move the reflex element inside a <turbo-frame> or set either the 'data-turbo-reflex-frame' or 'data-turbo-frame' attribute.",e),t}function m(e){let t=document.getElementById(e);return t||console.error(`The frame '${e}' does not exist!`),t}function b(e){let t=e.dataset.turboReflexFrameSrc;return t||console.error(`The 'data-turbo-reflex-frame-src' attribute for the frame '${e.id}' is not set!`,"This attribute is set automatically for frames that load their content after being inserted into the DOM.","Frames that eager load their content server side must set this attribute explicitly.",e),t}function h(){return document.getElementById("turbo-reflex-token").getAttribute("content")}function g(e){let t=document.createElement("a");return t.href=e,new URL(t)}function p(e){let t=Array.from(e.attributes).reduce((r,a)=>(a.name.includes("data-turbo-reflex")||(r[a.name]=a.value),r),{});return t.tagName=e.tagName,t.value=e.value,e.tagName.toLowerCase()==="select"&&(e.multiple?t.values=Array.from(e.options).reduce((r,a)=>(a.selected&&r.push(a.value),r),[]):t.value=e.options[e.selectedIndex].value),e.tagName.toLowerCase()==="input"&&e.type==="checkbox"&&(t.checked=!!e.checked),t}function f(e){let t=e.target.closest("[data-turbo-reflex]");if(!t||!d(e.type,t.tagName))return;let r=l(t);if(!r)return;let a=m(r);if(!a)return;let u=b(a);if(!u)return;let c={token:h(),name:t.dataset.turboReflex,frame:r,element:p(t)};if(t.tagName.toLowerCase()==="form"){let o=document.createElement("input");o.type="hidden",o.name="turbo_reflex",o.value=JSON.stringify(c),t.appendChild(o)}else{e.preventDefault(),e.stopPropagation();let o=g(u);o.searchParams.set("turbo_reflex",JSON.stringify(c)),a.src=o.toString()}}function s(e,t){n[e]=t,document.removeEventListener(e,f,!0),document.addEventListener(e,f,!0)}s("change",["input","select","textarea"]);s("submit",["form"]);s("click",["*"]);var y={registerEvent:s,registeredEvents:n};export{y as default};
//# sourceMappingURL=turbo_reflex.min.js.map
